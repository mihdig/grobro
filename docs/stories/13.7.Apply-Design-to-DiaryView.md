# Story 13.7: Apply Smart Greenhouse Design to DiaryView

## Status
Approved

## Story
**As a** user of GroBro,
**I want** the DiaryView to follow the Smart Greenhouse design system,
**so that** my event timeline has a consistent, premium dark aesthetic matching the rest of the app.

## Acceptance Criteria
1. DiaryView uses Smart Greenhouse color palette throughout
2. Filter buttons use design system styling with proper touch targets (44pt)
3. Event rows use GlassCard or glassmorphic styling
4. Empty state matches design system aesthetic
5. All interactive elements have accessibility labels
6. Performance meets 60fps for scrolling
7. Works on iOS 17.0+

## Tasks / Subtasks

- [ ] **Task 1: Apply Background and Container Styling** (AC: 1)
  - [ ] Add `Color.deepBackground` to main container
  - [ ] Replace `.background(.background)` with design system colors
  - [ ] Apply glassmorphic styling to filter bar

- [ ] **Task 2: Redesign FilterButton Component** (AC: 2, 5)
  - [ ] Increase touch target to 44pt minimum (currently 6pt vertical)
  - [ ] Replace `.accentColor` with `.electricGreen`
  - [ ] Replace standard background colors with `.surfaceLight`/`.electricGreen`
  - [ ] Replace `.primary` with `.primaryText`
  - [ ] Add `accessibilityLabel` and `accessibilityAddTraits(.isSelected)`

- [ ] **Task 3: Redesign EventRowView Component** (AC: 1, 3, 5)
  - [ ] Apply GlassCard or glassmorphic row styling
  - [ ] Replace `.accentColor` with event-type-specific colors
  - [ ] Replace `.secondary` with `.secondaryText`
  - [ ] Replace `.orange` with `.warningOrange`
  - [ ] Add `accessibilityElement(children: .combine)`
  - [ ] Add meaningful `accessibilityLabel` for each event

- [ ] **Task 4: Update EventSourceBadge Component** (AC: 1)
  - [ ] Replace `.blue` with `.cyanBright` (AC Infinity)
  - [ ] Replace `.green` with `.electricGreen` (Vivosun)
  - [ ] Replace `.orange` with `.warningOrange` (Light Meter)
  - [ ] Replace `.purple` with `.purpleNeon` (Other)

- [ ] **Task 5: Redesign Empty State** (AC: 4)
  - [ ] Apply glassmorphic container
  - [ ] Use `.electricGreen` for icon with glow effect
  - [ ] Use `.primaryText` and `.secondaryText` for text
  - [ ] Add subtle animation (optional)

- [ ] **Task 6: Update List Styling** (AC: 1, 6)
  - [ ] Use `.scrollContentBackground(.hidden)`
  - [ ] Apply proper row backgrounds
  - [ ] Ensure smooth 60fps scrolling with LazyVStack if needed

## Dev Notes

### Source Tree
```
GroBroPackage/Sources/GroBroFeature/
├── Diary/
│   └── DiaryView.swift  ← Primary file to modify
├── DesignSystem/
│   ├── SmartGreenhouseColors.swift
│   ├── GlassCard.swift
│   └── NeonButton.swift
```

### Current Issues Found in Review
1. **Line 31**: `.background(.background)` - should be `Color.deepBackground`
2. **Lines 92, 98-99**: `.secondary` - should be `.tertiaryText`/`.secondaryText`
3. **Lines 118-121**: FilterButton uses standard iOS colors
4. **Line 122**: `.primary` - should be `.primaryText`
5. **Line 136**: `.accentColor` - should be `.electricGreen`
6. **Line 168**: `.orange` - should be `.warningOrange`
7. **Lines 252-264**: EventSourceBadge uses standard colors

### Color Mapping for Event Types
```swift
EventType.watering    → .cyanBright
EventType.feeding     → .electricGreen
EventType.photo       → .purpleNeon
EventType.note        → .secondaryText
EventType.stageChange → .goldElectric
EventType.lightCheck  → .warningOrange
```

### FilterButton Target Design
```swift
// Touch target: 44pt minimum
.padding(.horizontal, 16)
.padding(.vertical, 12)  // Currently 6pt - too small!
.background(isSelected ? Color.electricGreen : Color.surfaceLight)
.foregroundColor(isSelected ? .deepBackground : .primaryText)
```

## Testing

### Test Location
`GroBroPackage/Tests/GroBroFeatureTests/DiaryViewTests.swift`

### Testing Requirements
- Verify filter button touch targets meet 44pt
- Test accessibility labels with VoiceOver
- Profile scrolling performance with 100+ events

## Change Log
| Date       | Version | Description | Author |
|-----------|---------|-------------|--------|
| 2025-11-28 | 1.0     | Story created from Party Mode UI Review | Grow Master Sarah (PO) |

## Dev Agent Record

### Agent Model Used
_To be filled by dev agent_

### Debug Log References
_To be filled by dev agent_

### Completion Notes List
_To be filled by dev agent_

### File List
_To be filled by dev agent_

## QA Results
_To be filled by QA agent_
