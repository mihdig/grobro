# Story 1.3: Garden View and Navigation

## Status

Approved

## Story

**As a** grower with one or more plants in GroBro,  
**I want** to see all my plants at a glance with key information and quick navigation,  
**so that** I can quickly understand the state of my garden and open a specific plant when needed.

## Acceptance Criteria

1. Garden screen displays a list/grid of plant cards for all non‑archived plants.  
2. Each plant card shows at minimum:
   - Latest photo or placeholder  
   - Plant name  
   - Current stage  
   - Age in days  
3. When the user taps a plant card, they are navigated to the corresponding Plant Detail screen.  
4. If there are no plants, Garden shows an empty state message with a clear call‑to‑action to create the first plant.  
5. Garden ordering is deterministic (e.g., by creation date or next watering placeholder) and stable between app launches.  
6. Garden works entirely from local data and does not block on network connectivity.

## Tasks / Subtasks

- [x] Implement GardenView UI (AC: 1–4,6)
  - [x] Create `GardenView` and `GardenViewModel` under `Features/Garden/` (AC: 1–4)
  - [x] Bind GardenViewModel to `PlantStore` to load all non‑archived plants (AC: 1)
  - [x] Render plant cards with photo, name, stage, age (AC: 2)
  - [x] Implement empty state with CTA when there are no plants (AC: 4)
- [x] Implement navigation from Garden to Plant Detail (AC: 3)
  - [x] On card tap, navigate to `PlantDetailView` with the selected plant ID (AC: 3)
  - [x] Ensure navigation works from the app root and back navigation returns to Garden (AC: 3)
- [x] Implement deterministic ordering (AC: 5)
  - [x] Choose and implement a default sort order (e.g., by `createdAt` descending) (AC: 5)
  - [x] Document the chosen ordering in Dev Notes (AC: 5)

## Dev Notes

- Root app view should now use `GardenView` as the main content.  
- Sorting: for now, ordering by `createdAt` descending is acceptable; later stories may replace this with “next watering first”.  
- Ensure Garden uses only local state and services; any future external API calls should be implemented behind services without blocking UI.

### Testing

- Unit tests:
  - GardenViewModel loads and sorts plants correctly given a mocked `PlantStore`.  
  - Empty state is correctly indicated when there are zero plants.  
- Manual checks:
  - With multiple plants created, Garden shows all cards and allows navigation to each Plant Detail.  
  - On app relaunch, Garden ordering remains consistent.

## Change Log

| Date       | Version | Description                            | Author |
|-----------|---------|----------------------------------------|--------|
| 2025-11-14 | 0.1     | Initial story draft and approval       | PO/PM  |

## Dev Agent Record

### Agent Model Used

Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)

### Debug Log References

None

### Completion Notes List

- Story was completed as part of Story 1.2 implementation
- GardenView implements all required features: plant list, empty state, navigation
- PlantStore fetch uses createdAt descending sort order for deterministic display
- Navigation uses SwiftUI NavigationStack for proper back navigation
- All data loaded from local Core Data store - no network dependencies

### File List

All files created in Story 1.2:
- GroBroPackage/Sources/GroBroFeature/Garden/GardenView.swift
- GroBroPackage/Sources/GroBroFeature/Garden/GardenViewModel.swift
- GroBroPackage/Sources/GroBroFeature/ContentView.swift (updated to use GardenView)

