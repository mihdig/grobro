# Story 13.9: Complete Smart Greenhouse Design for AnalyticsView

## Status
Approved

## Story
**As a** Pro user of GroBro,
**I want** the Analytics dashboard to fully follow the Smart Greenhouse design system,
**so that** premium features feel cohesive with the rest of the app.

## Acceptance Criteria
1. All remaining standard iOS colors replaced with design system colors
2. FeatureBullet component uses design system styling
3. Locked state uses glassmorphic styling with `.goldElectric` accent
4. CTA buttons use NeonButton component
5. Error state uses design system colors
6. All interactive elements have accessibility labels
7. Works on iOS 18.0+

## Tasks / Subtasks

- [ ] **Task 1: Update Locked State Styling** (AC: 3)
  - [ ] Replace `.yellow, .orange` gradient with `.goldElectric`
  - [ ] Apply GlassCard to feature list container
  - [ ] Add subtle glow effect to lock icon

- [ ] **Task 2: Update FeatureBullet Component** (AC: 2)
  - [ ] Replace `.green` with `.electricGreen`
  - [ ] Use `.primaryText` for title
  - [ ] Use `.secondaryText` for description
  - [ ] Consider adding subtle icon glow

- [ ] **Task 3: Replace CTA Buttons** (AC: 4)
  - [ ] Replace `.borderedProminent` with `NeonButton`
  - [ ] Use `.primary` style for "Upgrade to Pro"
  - [ ] Use appropriate style for "Try Again" in error state

- [ ] **Task 4: Update Error State** (AC: 5)
  - [ ] Replace `.orange` with `.warningOrange`
  - [ ] Apply GlassCard to error container
  - [ ] Use design system text colors

- [ ] **Task 5: Update Empty State** (AC: 1)
  - [ ] Replace `.secondary` with `.tertiaryText`
  - [ ] Apply subtle glassmorphic background
  - [ ] Use `.electricGreen` accent for icon

- [ ] **Task 6: Add Accessibility Support** (AC: 6)
  - [ ] Add `accessibilityLabel` to date range picker
  - [ ] Add `accessibilityLabel` to feature bullets
  - [ ] Add `accessibilityHint` to upgrade button
  - [ ] Ensure chart components are accessible

## Dev Notes

### Source Tree
```
GroBroPackage/Sources/GroBroFeature/
├── Analytics/
│   ├── AnalyticsView.swift  ← Primary file
│   └── Components/
│       ├── GrowthTimelineChart.swift
│       ├── WateringFrequencyChart.swift
│       ├── EventDistributionChart.swift
│       └── StageDurationChart.swift
├── DesignSystem/
│   ├── SmartGreenhouseColors.swift
│   ├── GlassCard.swift
│   └── NeonButton.swift
```

### Current Issues Found in Review
1. **Lines 179-183**: Lock icon uses `.yellow, .orange` gradient - should use `.goldElectric`
2. **Line 258**: FeatureBullet uses `.green` - should be `.electricGreen`
3. **Line 167**: Uses `.borderedProminent` - should use `NeonButton`
4. **Line 154**: Error icon uses `.orange` - should be `.warningOrange`

### Already Good
- Uses `GlassLoadingIndicator` and `GlassSkeletonCard`
- Proper loading states implemented
- Pro/Free gating works correctly
- Date range picker functional

### FeatureBullet Target Design
```swift
struct FeatureBullet: View {
    let icon: String
    let title: String
    let description: String

    var body: some View {
        HStack(alignment: .top, spacing: 12) {
            Image(systemName: icon)
                .font(.title3)
                .foregroundStyle(.electricGreen)
                .shadow(color: .electricGreen.opacity(0.3), radius: 4)
                .frame(width: 24)

            VStack(alignment: .leading, spacing: 2) {
                Text(title)
                    .font(.subheadline)
                    .fontWeight(.semibold)
                    .foregroundColor(.primaryText)

                Text(description)
                    .font(.caption)
                    .foregroundColor(.secondaryText)
            }
        }
        .accessibilityElement(children: .combine)
        .accessibilityLabel("\(title): \(description)")
    }
}
```

### Locked State Icon Target
```swift
Image(systemName: "lock.fill")
    .font(.system(size: 80))
    .foregroundStyle(Color.goldElectric)
    .shadow(color: .goldElectric.opacity(0.5), radius: 20)
```

## Testing

### Test Location
`GroBroPackage/Tests/GroBroFeatureTests/AnalyticsViewTests.swift`

### Testing Requirements
- Test Pro/Free state transitions
- Verify color values match design system
- Test accessibility labels with VoiceOver

## Change Log
| Date       | Version | Description | Author |
|-----------|---------|-------------|--------|
| 2025-11-28 | 1.0     | Story created from Party Mode UI Review | Grow Master Sarah (PO) |

## Dev Agent Record

### Agent Model Used
_To be filled by dev agent_

### Debug Log References
_To be filled by dev agent_

### Completion Notes List
_To be filled by dev agent_

### File List
_To be filled by dev agent_

## QA Results
_To be filled by QA agent_
